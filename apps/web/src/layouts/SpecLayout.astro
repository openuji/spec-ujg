---
import BaseLayout from "./BaseLayout.astro";
import Header from "@/components/astro/Header.astro";
import { Toc } from "@/components/react/toc/Toc";
import type { TocEntry } from "@openuji/speculator";

interface Props {
  title?: string;
  parent: { href: string; title: string };
  toc?: TocEntry[];
}
const { toc = [], title = "", parent } = Astro.props;
---

<BaseLayout title={title} bodyClass="bg-spec">
  <Header toc={toc} title={title} breadcrumb={[parent]} />

  <div class="flex px-lg">
    <aside class="sidebar w-sidebar border-r border-border shrink-0">
      <div class="sidebar-content sticky top-[var(--height-header)] -ml-3">
        <Toc toc={toc} client:load />
      </div>
    </aside>

    <main
      class="max-w-spec min-w-0 mx-auto p-md text-base md:text-lg leading-relaxed"
    >
      <slot />
    </main>
  </div>
  <footer class="flex flex-col items-center justify-center">
    <hr class="w-full" />
    <div class="p-md">
      <p>
        generated by <a target="_blank" href="https://speculator.openuji.dev"
          >Speculator</a
        >
      </p>
    </div>
  </footer>
</BaseLayout>
