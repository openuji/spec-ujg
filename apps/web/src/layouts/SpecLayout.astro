---
import BaseLayout from "./BaseLayout.astro";
import Header from "../components/Header.astro";
import { Toc } from "../components/ui/Toc";
import type { TocEntry } from "../components/ui/Toc";

interface Props {
  title?: string;
  parent: { href: string; title: string };
  toc?: TocEntry[];
}
const { toc = [], title = "", parent } = Astro.props;
---

<BaseLayout title={title} bodyClass="bg-spec">
  <Header toc={toc} breadcrumb={[parent, { title }]} />

  <div class="flex px-lg">
    <aside class="sidebar w-sidebar border-r border-border">
      <div class="sidebar-content sticky top-[var(--height-header)]">
        <div class="sidebar-title">Table of Contents</div>
        <Toc toc={toc} client:load />
      </div>
    </aside>

    <main class="max-w-spec min-w-0 mx-auto p-md">
      <slot />
    </main>
    <div class="w-sidebar"></div>
  </div>
  <footer class="flex flex-col items-center justify-center">
    <hr class="w-full" />
    <div class="p-md">
      <p>
        generated by <a target="_blank" href="https://speculator.openuji.dev"
          >Speculator</a
        >
      </p>
    </div>
  </footer>
</BaseLayout>
