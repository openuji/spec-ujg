---
import { type Document } from "@openuji/speculator";
import { loadDocument, listSpecs } from "@/utils/load";
import BlockRenderer from "@/components/BlockRenderer.astro";

export function getStaticPaths() {
    const specs = listSpecs();
    return specs.map((spec) => ({
        params: {
            spec,
        },
    }));
}

const { spec } = Astro.params;
const document: Document = await loadDocument(spec);
---

<main class="spec-content">
    {
        document.children.map((child) => (
            <BlockRenderer
                node={child}
                documentPath={document.sourcePos?.file}
            />
        ))
    }
</main>

<footer>
    <hr />
    <p>Generated by Speculator (Multi-page Workspace)</p>
</footer>
