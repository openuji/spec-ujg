---
import Panel from "@/components/astro/Panel.astro";
import EditorDraftLayout from "@/layouts/EditorDraftLayout.astro";
import { listSortedSpecs } from "@/lib/load";
import { type EntryWithConfig } from "@openuji/speculator";
import { cn } from "@/lib/utils";

const specs = await listSortedSpecs();

const maturityStyles: Record<string, string> = {
  incubating: "bg-accent-soft/5 text-zinc-400 border border-border",
  draft: "bg-accent-soft",
};
---

<EditorDraftLayout title="Editor's Draft">
  <h1>Editor's Draft (ED)</h1>
  <section class="card-grid">
    <Panel variant="contrast">
      <p>
        The ED workspace captures the newest ideas, examples, and proposals.
        Documents can change at any time. You can use it for:
      </p>
      <ul>
        <li>Participate in discussions and contribute.</li>
        <li>Track upcoming changes while implementing.</li>
        <li>Prototype the newest journey patterns.</li>
      </ul>
    </Panel>
  </section>

  <div class="flow__grid">
    {
      specs.entries.map((spec: EntryWithConfig) => (
        <a
          href={`/ed/${spec.config.id}`}
          class="card min-h-auto hover:bg-accent-soft/1 hover:translate-y-[1px] transition-transform"
        >
          <h3>{spec.config.title}</h3>
          <span
            class={cn(
              "tag",
              maturityStyles[spec.config.maturityLevel] || "bg-accent-soft",
            )}
          >
            Maturity: {spec.config.maturityLevel}
          </span>
          View Spec â†’
        </a>
      ))
    }
  </div>
</EditorDraftLayout>
