---
import Panel from '@/components/astro/Panel.astro';
import EditorDraftLayout from '@/layouts/EditorDraftLayout.astro';
import { getDocuments } from '@/lib/load';
import { type Document } from '@openuji/speculator';
import { cn } from '@/lib/utils';

const documents = await getDocuments();

const maturityStyles: Record<string, string> = {
  incubating: 'bg-accent-soft/5 text-zinc-400 border border-border',
  draft: 'bg-accent-soft',
};
---

<EditorDraftLayout title="Editor's Draft">
  <h1>Editor's Draft (ED)</h1>
  <section class="card-grid">
    <Panel variant="contrast">
      <p>
        The ED workspace captures the newest ideas, examples, and proposals. Documents can change at
        any time. You can use it for:
      </p>
      <ul>
        <li>Participate in discussions and contribute.</li>
        <li>Track upcoming changes while implementing.</li>
        <li>Prototype the newest journey patterns.</li>
      </ul>
    </Panel>
  </section>

  <div class="flow__grid">
    {
      documents.map((doc: Document) => (
        <a
          href={`/ed/${doc.id}`}
          class="card min-h-auto hover:bg-accent-soft/1 hover:translate-y-[1px] transition-transform"
        >
          <h3>{doc.metadata?.title}</h3>
          <span class={cn('tag', maturityStyles[doc.metadata?.maturityLevel || 'draft'])}>
            {doc.metadata?.maturityLevel || 'draft'}
          </span>
          View Spec â†’
        </a>
      ))
    }
  </div>
</EditorDraftLayout>
